# Manual approval steps template
# Gates the public release process with manual intervention
# Note: Uses continueOnError to prevent pipeline failure on timeout rejection.
# IMPORTANT: Downstream jobs MUST check for success of this manual validation step
# using condition: succeeded() to ensure they only run when approval is granted.
# Usage:
# - template: templates/steps/manual-approval.yml

steps:
- task: ManualValidation@1
  timeoutInMinutes: 1440 # 24 hours timeout
  continueOnError: true # Don't fail the pipeline if validation is rejected
  inputs:
    notifyUsers: appdevtooling@microsoft.com
    onTimeout: 'reject'
    instructions: |
      Please review and approve the public release:
      
      1. Verify NPM packages have been published internally
      2. Review build artifacts and quality
      3. Confirm readiness for public NPM publication
      4. Confirm readiness for VS Code extension publication
      
      Approving this will trigger:
      - Public NPM package publishing
      - VS Code extension signing and publishing
      
      Only authorized team members can approve this release.
      
      Note: This validation will automatically reject after 24 hours if no action is taken, but the pipeline will continue.
  displayName: 'Manual approval for public release'
